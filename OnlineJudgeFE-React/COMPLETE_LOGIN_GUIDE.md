# ğŸ” MetaSeekOJ Scratch ç¼–è¾‘å™¨ç™»å½•ç³»ç»Ÿå®Œæ•´æŒ‡å—

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### **1. åç«¯ APIï¼ˆå·²å­˜åœ¨ï¼‰**
- âœ… `POST /api/login/` - ç”¨æˆ·ç™»å½•
- âœ… `GET /api/logout/` - ç”¨æˆ·ç™»å‡º
- âœ… `GET /api/profile/` - è·å–ç”¨æˆ·ä¿¡æ¯
- âœ… `POST /api/register/` - ç”¨æˆ·æ³¨å†Œ

### **2. æ•°æ®åº“è¡¨ï¼ˆå·²å­˜åœ¨ï¼‰**
- âœ… `User` - ç”¨æˆ·è¡¨ï¼ˆMetaSeekOJï¼‰
- âœ… `scratch_user_profile` - Scratch ç”¨æˆ·æ‰©å±•è¡¨
- âœ… `scratch_projects` - Scratch é¡¹ç›®è¡¨

### **3. å‰ç«¯é¡µé¢ï¼ˆæ–°åˆ›å»ºï¼‰**
- âœ… `/login` - ç™»å½•é¡µé¢
- âœ… `/register` - æ³¨å†Œé¡µé¢
- âœ… Scratch ç¼–è¾‘å™¨é›†æˆ

### **4. Scratch åŸç”Ÿ UI**
- âœ… å³ä¸Šè§’ç™»å½•/æ³¨å†ŒæŒ‰é’®
- âœ… ç”¨æˆ·å¤´åƒ + ç”¨æˆ·å
- âœ… ç”¨æˆ·ä¸‹æ‹‰èœå•

---

## ğŸš€ **å®Œæ•´ä½¿ç”¨æµç¨‹**

### **æµç¨‹ 1ï¼šæ–°ç”¨æˆ·æ³¨å†Œ**

```
1. è®¿é—® Scratch ç¼–è¾‘å™¨ï¼ˆæœªç™»å½•ï¼‰
   http://localhost:8081/classroom/scratch/editor
   
2. Scratch ç¼–è¾‘å™¨å³ä¸Šè§’æ˜¾ç¤º
   â†’ [åŠ å…¥ Scratch] [ç™»å½•]

3. ç‚¹å‡» [åŠ å…¥ Scratch]ï¼ˆæ³¨å†ŒæŒ‰é’®ï¼‰
   â†’ è·³è½¬åˆ°æ³¨å†Œé¡µé¢
   
4. å¡«å†™æ³¨å†Œä¿¡æ¯
   â†’ ç”¨æˆ·å
   â†’ é‚®ç®±
   â†’ å¯†ç 
   â†’ ç¡®è®¤å¯†ç 
   
5. ç‚¹å‡»"æ³¨å†Œè´¦å·"
   â†’ è°ƒç”¨åç«¯ APIï¼šPOST /api/register/
   â†’ æ³¨å†ŒæˆåŠŸï¼
   
6. è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
   â†’ ä½¿ç”¨åˆšæ³¨å†Œçš„è´¦å·ç™»å½•
```

---

### **æµç¨‹ 2ï¼šç”¨æˆ·ç™»å½•**

```
1. è®¿é—®ç™»å½•é¡µ
   http://localhost:8081/login
   
2. å¡«å†™ç™»å½•ä¿¡æ¯
   â†’ ç”¨æˆ·å
   â†’ å¯†ç 
   
3. ç‚¹å‡»"ç™»å½•"
   â†’ è°ƒç”¨åç«¯ APIï¼šPOST /api/login/
   â†’ ç™»å½•æˆåŠŸï¼
   
4. è‡ªåŠ¨è¿”å›ç¼–è¾‘å™¨
   â†’ http://localhost:8081/classroom/scratch/editor
   
5. Scratch ç¼–è¾‘å™¨å³ä¸Šè§’æ›´æ–°
   â†’ [ğŸ‘¤å¤´åƒ] æˆ‘çš„ä½œå“ â–¼
```

---

### **æµç¨‹ 3ï¼šåœ¨ç¼–è¾‘å™¨ä¸­ä¿å­˜é¡¹ç›®**

```
1. ç”¨æˆ·åœ¨ç¼–è¾‘å™¨ä¸­åˆ›ä½œ
   
2. ç‚¹å‡» Scratch çš„"æ–‡ä»¶"èœå•
   
3. ç‚¹å‡»"ç«‹å³ä¿å­˜"
   
4. æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼š
   
   æœªç™»å½•ï¼š
   â†’ å¼¹å‡ºç™»å½•æç¤ºå¯¹è¯æ¡†
   â†’ ç‚¹å‡»"ç«‹å³ç™»å½•"
   â†’ è·³è½¬åˆ°ç™»å½•é¡µ
   â†’ ç™»å½•åè¿”å›ç¼–è¾‘å™¨
   â†’ å†æ¬¡ç‚¹å‡»"ç«‹å³ä¿å­˜"
   
   å·²ç™»å½•ï¼š
   â†’ å¼¹å‡ºä¿å­˜å¯¹è¯æ¡†
   â†’ å¡«å†™é¡¹ç›®æ ‡é¢˜ã€æè¿°
   â†’ ç‚¹å‡»"ä¿å­˜"
   â†’ ä¿å­˜æˆåŠŸï¼âœ…
```

---

### **æµç¨‹ 4ï¼šæŸ¥çœ‹æˆ‘çš„ä½œå“**

```
1. å·²ç™»å½•ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’çš„ç”¨æˆ·ä¿¡æ¯
   [ğŸ‘¤å¤´åƒ] æˆ‘çš„ä½œå“ â–¼
   
2. æ˜¾ç¤ºä¸‹æ‹‰èœå•ï¼š
   â†’ æˆ‘çš„ä½œå“
   â†’ è´¦æˆ·è®¾ç½®
   â†’ â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â†’ é€€å‡ºç™»å½•
   
3. ç‚¹å‡»"æˆ‘çš„ä½œå“"
   â†’ è·³è½¬åˆ°é¡¹ç›®åˆ—è¡¨é¡µ
   â†’ http://localhost:8081/classroom/scratch/projects
```

---

## ğŸ”§ **æŠ€æœ¯å®ç°ç»†èŠ‚**

### **1. ç™»å½•çŠ¶æ€æ£€æŸ¥**

**ä½ç½®**ï¼š`Editor.tsx`

```typescript
const checkLoginStatus = async () => {
  try {
    // è°ƒç”¨ MetaSeekOJ çš„ç”¨æˆ·ä¿¡æ¯æ¥å£
    const response = await fetch('http://localhost:8086/api/profile/', {
      credentials: 'include'  // æºå¸¦ session cookie
    })
    
    if (response.ok) {
      const data = await response.json()
      setIsLoggedIn(true)
      setUsername(data.data.user.username)  // ä»å“åº”ä¸­è·å–ç”¨æˆ·å
    } else {
      setIsLoggedIn(false)
    }
  } catch (error) {
    setIsLoggedIn(false)
  }
}
```

---

### **2. ç™»å½•æ¥å£è°ƒç”¨**

**ä½ç½®**ï¼š`Login.tsx`

```typescript
const response = await fetch('http://localhost:8086/api/login/', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  credentials: 'include',  // é‡è¦ï¼šè®©æµè§ˆå™¨ä¿å­˜ session cookie
  body: JSON.stringify({
    username: username.trim(),
    password: password
  })
})

const data = await response.json()

if (data.error) {
  // ç™»å½•å¤±è´¥
  toast.error(data.data || 'ç™»å½•å¤±è´¥')
} else {
  // ç™»å½•æˆåŠŸ
  window.location.href = returnUrl  // è¿”å›åŸé¡µé¢
}
```

---

### **3. ç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™ Scratch**

**ä½ç½®**ï¼š`Editor.tsx`

```typescript
// é¡µé¢åŠ è½½æ—¶è®¾ç½®ç”¨æˆ·ä¿¡æ¯
useEffect(() => {
  window.scratchUserInfo = {
    isLoggedIn: isLoggedIn,
    username: username,
    avatarUrl: null  // å¯ä»åç«¯è·å–
  }
}, [isLoggedIn, username])
```

**Scratch ç¼–è¾‘å™¨è¯»å–**ï¼š

**ä½ç½®**ï¼š`scratch-editor/packages/scratch-gui/src/playground/render-gui.jsx`

```javascript
const userInfo = window.scratchUserInfo || {
  isLoggedIn: false,
  username: null,
  avatarUrl: null
}

<WrappedGui
  username={userInfo.username}
  accountMenuOptions={{
    canHaveSession: true,
    canLogin: true,
    canRegister: true,
    canLogout: userInfo.isLoggedIn,
    avatarUrl: userInfo.avatarUrl,
    myStuffUrl: '#/classroom/scratch/projects'
  }}
/>
```

---

## ğŸ“Š **API å“åº”æ ¼å¼**

### **ç™»å½•æˆåŠŸ**

```json
POST /api/login/

è¯·æ±‚ï¼š
{
  "username": "testuser",
  "password": "123456"
}

å“åº”ï¼ˆæˆåŠŸï¼‰ï¼š
{
  "error": null,
  "data": "Succeeded"
}

å“åº”ï¼ˆå¤±è´¥ï¼‰ï¼š
{
  "error": "error",
  "data": "Invalid username or password"
}
```

---

### **è·å–ç”¨æˆ·ä¿¡æ¯**

```json
GET /api/profile/

å“åº”ï¼ˆå·²ç™»å½•ï¼‰ï¼š
{
  "error": null,
  "data": {
    "user": {
      "id": 1,
      "username": "testuser",
      "email": "test@example.com",
      "real_name": "æµ‹è¯•ç”¨æˆ·",
      "admin_type": "Regular User",
      ...
    }
  }
}

å“åº”ï¼ˆæœªç™»å½•ï¼‰ï¼š
{
  "error": null,
  "data": null
}
```

---

### **æ³¨å†Œç”¨æˆ·**

```json
POST /api/register/

è¯·æ±‚ï¼š
{
  "username": "newuser",
  "email": "new@example.com",
  "password": "123456"
}

å“åº”ï¼ˆæˆåŠŸï¼‰ï¼š
{
  "error": null,
  "data": "Succeeded"
}
```

---

## ğŸ¨ **é¡µé¢è®¾è®¡**

### **ç™»å½•é¡µé¢**
```
http://localhost:8081/login
```

**ç‰¹ç‚¹**ï¼š
- ğŸ¨ æ©™è‰²åˆ°ç´«è‰²æ¸å˜èƒŒæ™¯
- ğŸ” ç™»å½•å›¾æ ‡ï¼ˆ16x16 åœ†è§’æ–¹å—ï¼‰
- ğŸ“ ç”¨æˆ·åè¾“å…¥æ¡†ï¼ˆå¸¦å›¾æ ‡ï¼‰
- ğŸ”’ å¯†ç è¾“å…¥æ¡†ï¼ˆå¸¦å›¾æ ‡ï¼‰
- ğŸ¯ æ¸å˜ç™»å½•æŒ‰é’®ï¼ˆæ©™åˆ°ç´«ï¼‰
- ğŸ“± å“åº”å¼è®¾è®¡
- âœ¨ åŠ¨ç”»æ•ˆæœ

---

### **æ³¨å†Œé¡µé¢**
```
http://localhost:8081/register
```

**ç‰¹ç‚¹**ï¼š
- ğŸ¨ ç´«è‰²åˆ°æ©™è‰²æ¸å˜èƒŒæ™¯ï¼ˆä¸ç™»å½•åå‘ï¼‰
- â• æ³¨å†Œå›¾æ ‡
- ğŸ“ ç”¨æˆ·åã€é‚®ç®±ã€å¯†ç ã€ç¡®è®¤å¯†ç è¾“å…¥æ¡†
- ğŸ¯ æ¸å˜æ³¨å†ŒæŒ‰é’®ï¼ˆç´«åˆ°æ©™ï¼‰
- âœ… å¯†ç éªŒè¯
- ğŸ“± å“åº”å¼è®¾è®¡
- âœ¨ åŠ¨ç”»æ•ˆæœ

---

## ğŸ”— **å®Œæ•´çš„é›†æˆæ¶æ„**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        React å‰ç«¯ (8081)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Login.tsx / Register.tsx          â”‚  â”‚
â”‚  â”‚ â†“ è°ƒç”¨ç™»å½•/æ³¨å†Œ API               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ HTTP + Session Cookie
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Django åç«¯ (8086)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ /api/login/  - ç™»å½•è®¤è¯           â”‚  â”‚
â”‚  â”‚ /api/profile/ - è·å–ç”¨æˆ·ä¿¡æ¯      â”‚  â”‚
â”‚  â”‚ /api/logout/ - ç™»å‡º               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PostgreSQL æ•°æ®åº“                 â”‚  â”‚
â”‚  â”‚ - User è¡¨                         â”‚  â”‚
â”‚  â”‚ - scratch_user_profile è¡¨         â”‚  â”‚
â”‚  â”‚ - scratch_projects è¡¨             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scratch ç¼–è¾‘å™¨ (8601) - iframe        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è¯»å– window.scratchUserInfo       â”‚  â”‚
â”‚  â”‚ æ˜¾ç¤ºç™»å½•/æ³¨å†ŒæŒ‰é’® æˆ– ç”¨æˆ·ä¿¡æ¯     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± **è®¿é—®åœ°å€**

### **ç”¨æˆ·ç«¯**
```
ç™»å½•é¡µé¢ï¼š    http://localhost:8081/login
æ³¨å†Œé¡µé¢ï¼š    http://localhost:8081/register
Scratchç¼–è¾‘å™¨ï¼šhttp://localhost:8081/classroom/scratch/editor
é¡¹ç›®åˆ—è¡¨ï¼š    http://localhost:8081/classroom/scratch/projects
æ™ºæ…§è¯¾å ‚é¦–é¡µï¼šhttp://localhost:8081/classroom/
```

### **æµ‹è¯•ç”¨æˆ·**
å¦‚æœæ•°æ®åº“ä¸­å·²æœ‰æµ‹è¯•ç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚

å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥ï¼š
1. é€šè¿‡æ³¨å†Œé¡µé¢åˆ›å»ºæ–°ç”¨æˆ·
2. æˆ–ä½¿ç”¨ Django admin åˆ›å»ºï¼šhttp://localhost:8086/admin/

---

## ğŸ§ª **å®Œæ•´æµ‹è¯•æµç¨‹**

### **æµ‹è¯• 1ï¼šæ³¨å†Œæ–°ç”¨æˆ·**

```bash
# 1. è®¿é—®æ³¨å†Œé¡µé¢
http://localhost:8081/register

# 2. å¡«å†™ä¿¡æ¯
ç”¨æˆ·åï¼štestuser
é‚®ç®±ï¼štest@example.com
å¯†ç ï¼š123456
ç¡®è®¤å¯†ç ï¼š123456

# 3. ç‚¹å‡»"æ³¨å†Œè´¦å·"
â†’ âœ… æ³¨å†ŒæˆåŠŸ
â†’ è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
```

---

### **æµ‹è¯• 2ï¼šç™»å½•ç³»ç»Ÿ**

```bash
# 1. è®¿é—®ç™»å½•é¡µé¢
http://localhost:8081/login

# 2. å¡«å†™åˆšæ³¨å†Œçš„è´¦å·
ç”¨æˆ·åï¼štestuser
å¯†ç ï¼š123456

# 3. ç‚¹å‡»"ç™»å½•"
â†’ âœ… ç™»å½•æˆåŠŸ
â†’ è‡ªåŠ¨è¿”å›ä¹‹å‰çš„é¡µé¢
```

---

### **æµ‹è¯• 3ï¼šScratch ç¼–è¾‘å™¨ç™»å½•çŠ¶æ€**

```bash
# 1. ç™»å½•åè®¿é—®ç¼–è¾‘å™¨
http://localhost:8081/classroom/scratch/editor

# 2. æŸ¥çœ‹å³ä¸Šè§’
â†’ âœ… åº”è¯¥æ˜¾ç¤ºï¼š[ğŸ‘¤T] testuser â–¼
   ï¼ˆT æ˜¯ç”¨æˆ·åé¦–å­—æ¯ï¼‰

# 3. ç‚¹å‡»ç”¨æˆ·ä¿¡æ¯
â†’ âœ… æ˜¾ç¤ºä¸‹æ‹‰èœå•ï¼š
   - æˆ‘çš„ä½œå“
   - è´¦æˆ·è®¾ç½®  
   - â”€â”€â”€â”€â”€â”€â”€â”€â”€
   - é€€å‡ºç™»å½•

# 4. ç‚¹å‡»"æˆ‘çš„ä½œå“"
â†’ âœ… è·³è½¬åˆ°é¡¹ç›®åˆ—è¡¨
```

---

### **æµ‹è¯• 4ï¼šä¿å­˜åŠŸèƒ½**

```bash
# 1. åœ¨ç¼–è¾‘å™¨ä¸­åˆ›ä½œ

# 2. ç‚¹å‡» Scratch çš„"æ–‡ä»¶"â†’"ç«‹å³ä¿å­˜"

# 3. å·²ç™»å½•çŠ¶æ€
â†’ âœ… å¼¹å‡ºä¿å­˜å¯¹è¯æ¡†
â†’ å¡«å†™é¡¹ç›®ä¿¡æ¯
â†’ ä¿å­˜æˆåŠŸ

# 4. æœªç™»å½•çŠ¶æ€
â†’ âœ… å¼¹å‡ºç™»å½•æç¤º
â†’ å¼•å¯¼ç”¨æˆ·ç™»å½•
```

---

### **æµ‹è¯• 5ï¼šç™»å‡ºåŠŸèƒ½**

```bash
# 1. ç‚¹å‡»å³ä¸Šè§’ç”¨æˆ·ä¿¡æ¯
   
# 2. ç‚¹å‡»"é€€å‡ºç™»å½•"
   â†’ âœ… è°ƒç”¨ /api/logout/
   â†’ ç™»å‡ºæˆåŠŸ
   
# 3. é¡µé¢åˆ·æ–°
   â†’ âœ… å³ä¸Šè§’å˜å›ï¼š[åŠ å…¥ Scratch] [ç™»å½•]
```

---

## ğŸ¯ **API è°ƒç”¨ç¤ºä¾‹**

### **ç™»å½•**

```typescript
// å‰ç«¯è°ƒç”¨
const response = await fetch('http://localhost:8086/api/login/', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  credentials: 'include',  // é‡è¦ï¼
  body: JSON.stringify({
    username: 'testuser',
    password: '123456'
  })
})

// åç«¯å“åº”
{
  "error": null,
  "data": "Succeeded"
}

// Session cookie è‡ªåŠ¨è®¾ç½®
// åç»­è¯·æ±‚ä¼šè‡ªåŠ¨æºå¸¦æ­¤ cookie
```

---

### **è·å–ç”¨æˆ·ä¿¡æ¯**

```typescript
// å‰ç«¯è°ƒç”¨
const response = await fetch('http://localhost:8086/api/profile/', {
  credentials: 'include'  // æºå¸¦ session cookie
})

// åç«¯å“åº”
{
  "error": null,
  "data": {
    "user": {
      "username": "testuser",
      "email": "test@example.com",
      "real_name": "æµ‹è¯•ç”¨æˆ·"
    }
  }
}
```

---

### **ç™»å‡º**

```typescript
// å‰ç«¯è°ƒç”¨
const response = await fetch('http://localhost:8086/api/logout/', {
  credentials: 'include'
})

// åç«¯å“åº”
{
  "error": null,
  "data": "Succeeded"
}

// Session cookie è‡ªåŠ¨æ¸…é™¤
```

---

## ğŸ“ **å…³é”®é…ç½®**

### **1. CORS é…ç½®ï¼ˆDjangoï¼‰**

```python
# OnlineJudge/oj/settings.py

CORS_ALLOW_CREDENTIALS = True
CORS_ALLOWED_ORIGINS = [
    "http://localhost:8081",
    "http://localhost:8601"
]
```

---

### **2. Session é…ç½®ï¼ˆDjangoï¼‰**

```python
# Session ä½¿ç”¨ cookie
SESSION_COOKIE_NAME = 'sessionid'
SESSION_COOKIE_AGE = 1209600  # 2å‘¨
SESSION_COOKIE_HTTPONLY = True
SESSION_COOKIE_SAMESITE = 'Lax'
```

---

### **3. Axios é…ç½®ï¼ˆå‰ç«¯ï¼‰**

```typescript
// æ‰€æœ‰ API è°ƒç”¨éƒ½è¦è®¾ç½®
credentials: 'include'  // æºå¸¦å’Œä¿å­˜ cookie
```

---

## ğŸ‰ **å®Œæ•´åŠŸèƒ½æ¸…å•**

| åŠŸèƒ½ | é¡µé¢/ç»„ä»¶ | API | çŠ¶æ€ |
|------|----------|-----|------|
| ç”¨æˆ·æ³¨å†Œ | `/register` | `POST /api/register/` | âœ… å®Œæˆ |
| ç”¨æˆ·ç™»å½• | `/login` | `POST /api/login/` | âœ… å®Œæˆ |
| ç”¨æˆ·ç™»å‡º | Scratch èœå• | `GET /api/logout/` | âœ… å®Œæˆ |
| è·å–ç”¨æˆ·ä¿¡æ¯ | è‡ªåŠ¨æ£€æŸ¥ | `GET /api/profile/` | âœ… å®Œæˆ |
| Scratch æ˜¾ç¤ºç™»å½•çŠ¶æ€ | å³ä¸Šè§’ | - | âœ… å®Œæˆ |
| Scratch æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ | å³ä¸Šè§’ | - | âœ… å®Œæˆ |
| ä¿å­˜é¡¹ç›®ï¼ˆç™»å½•æ£€æŸ¥ï¼‰ | æ–‡ä»¶èœå• | `POST /api/scratch/projects/` | âœ… å®Œæˆ |
| æˆ‘çš„ä½œå“é“¾æ¥ | ç”¨æˆ·èœå• | - | âœ… å®Œæˆ |

---

## ğŸš€ **ç«‹å³æµ‹è¯•**

### **æ‰€æœ‰æœåŠ¡çŠ¶æ€**
```
âœ… React å‰ç«¯ (8081)
âœ… Scratch ç¼–è¾‘å™¨ (8601)  
âœ… Django åç«¯ (8086)
```

### **æµ‹è¯•æ­¥éª¤**

1. **è®¿é—®ç¼–è¾‘å™¨**
   ```
   http://localhost:8081/classroom/scratch/editor
   ```

2. **æŸ¥çœ‹å³ä¸Šè§’**
   - åº”è¯¥æ˜¾ç¤º Scratch åŸç”Ÿçš„ç™»å½•/æ³¨å†ŒæŒ‰é’®

3. **ç‚¹å‡»"ç™»å½•"**
   - åº”è¯¥è·³è½¬åˆ°ç²¾ç¾çš„ç™»å½•é¡µé¢

4. **ç™»å½•å**
   - è‡ªåŠ¨è¿”å›ç¼–è¾‘å™¨
   - å³ä¸Šè§’æ˜¾ç¤ºç”¨æˆ·å¤´åƒå’Œç”¨æˆ·å

5. **ä¿å­˜é¡¹ç›®**
   - ç‚¹å‡»"æ–‡ä»¶"â†’"ç«‹å³ä¿å­˜"
   - åº”è¯¥å¼¹å‡ºä¿å­˜å¯¹è¯æ¡†ï¼ˆå·²ç™»å½•ï¼‰

---

## ğŸ“¸ **é¡µé¢æ•ˆæœ**

### **ç™»å½•é¡µé¢**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            â”‚
â”‚      [ğŸ” ç™»å½•å›¾æ ‡]         â”‚
â”‚                            â”‚
â”‚    ç™»å½• MetaSeekOJ         â”‚
â”‚  ç™»å½•åç•…äº«æ™ºæ…§è¯¾å ‚æ‰€æœ‰åŠŸèƒ½ â”‚
â”‚                            â”‚
â”‚  ç”¨æˆ·å: [________]        â”‚
â”‚  å¯†ç :   [________]        â”‚
â”‚                            â”‚
â”‚  [ ç™»å½• ]                  â”‚
â”‚                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€ è¿˜æ²¡æœ‰è´¦å·ï¼Ÿâ”€â”€â”€â”€â”€â”€ â”‚
â”‚                            â”‚
â”‚  [ ç«‹å³æ³¨å†Œ ]              â”‚
â”‚  [ è¿”å› ]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **æ³¨å†Œé¡µé¢**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            â”‚
â”‚      [â• æ³¨å†Œå›¾æ ‡]         â”‚
â”‚                            â”‚
â”‚   åŠ å…¥ MetaSeekOJ          â”‚
â”‚  åˆ›å»ºè´¦å·ï¼Œå¼€å¯ç¼–ç¨‹å­¦ä¹ ä¹‹æ—… â”‚
â”‚                            â”‚
â”‚  ç”¨æˆ·å: [________]        â”‚
â”‚  é‚®ç®±:   [________]        â”‚
â”‚  å¯†ç :   [________]        â”‚
â”‚  ç¡®è®¤å¯†ç : [________]      â”‚
â”‚                            â”‚
â”‚  [ æ³¨å†Œè´¦å· ]              â”‚
â”‚                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€ å·²æœ‰è´¦å·ï¼Ÿâ”€â”€â”€â”€â”€â”€ â”‚
â”‚                            â”‚
â”‚  [ ç«‹å³ç™»å½• ]              â”‚
â”‚  [ è¿”å› ]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **Scratch ç¼–è¾‘å™¨ï¼ˆå·²ç™»å½•ï¼‰**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scratch              [ğŸ‘¤T] testuser â–¼ â”‚ â† ç»¿è‰²æ¡ï¼Œå³ä¸Šè§’
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ–‡ä»¶ | ç¼–è¾‘ | æ•™ç¨‹                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚        [ç¼–è¾‘å™¨åŒºåŸŸ]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‚¹å‡»ç”¨æˆ·ä¿¡æ¯ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆ‘çš„ä½œå“    â”‚
â”‚ è´¦æˆ·è®¾ç½®    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ é€€å‡ºç™»å½•    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… **å·²å®Œæˆçš„æ–‡ä»¶**

```
OnlineJudgeFE-React/src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ Login.tsx              âœ… ç™»å½•é¡µé¢
â”‚   â”‚   â””â”€â”€ Register.tsx           âœ… æ³¨å†Œé¡µé¢
â”‚   â””â”€â”€ creative-classroom/
â”‚       â””â”€â”€ scratch/
â”‚           â””â”€â”€ Editor.tsx          âœ… ç¼–è¾‘å™¨ï¼ˆå«ç™»å½•é›†æˆï¼‰
â”‚
â”œâ”€â”€ App.tsx                         âœ… è·¯ç”±é…ç½®
â””â”€â”€ api/
    â””â”€â”€ scratch.ts                  âœ… APIè°ƒç”¨å±‚
```

```
scratch-editor/packages/scratch-gui/src/
â”œâ”€â”€ playground/
â”‚   â””â”€â”€ render-gui.jsx              âœ… Scratch ç™»å½•é…ç½®
â””â”€â”€ components/menu-bar/
    â””â”€â”€ menu-bar.jsx                âœ… æ–‡ä»¶èœå•é›†æˆ
```

---

**æ‰€æœ‰åŠŸèƒ½å·²å®Œæˆï¼ç°åœ¨åˆ·æ–°æµè§ˆå™¨æµ‹è¯•å§ï¼** ğŸ‰

**æµ‹è¯•åœ°å€**ï¼š`http://localhost:8081/classroom/scratch/editor`

æ‚¨åº”è¯¥èƒ½çœ‹åˆ° Scratch åŸç”Ÿçš„ç™»å½•æŒ‰é’®ï¼Œç‚¹å‡»åä¼šè·³è½¬åˆ°æˆ‘ä»¬ç²¾ç¾çš„ç™»å½•é¡µé¢ï¼ğŸš€
