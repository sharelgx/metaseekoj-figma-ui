<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤´åƒæ˜¾ç¤ºæµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        .avatar-test {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .avatar-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 10px 0;
        }
        .avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: #374151;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }
        pre {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª å¤´åƒæ˜¾ç¤ºæµ‹è¯•</h1>
    
    <div class="avatar-test">
        <h2>æµ‹è¯•1: SVG Data URLï¼ˆä¸­æ–‡ï¼‰</h2>
        <div class="avatar-container">
            <div class="avatar">
                <img id="avatar1" alt="æŸ³">
            </div>
            <span>æŸ³è€å¸ˆçš„å¤´åƒ</span>
        </div>
        <pre id="svg1"></pre>
    </div>

    <div class="avatar-test">
        <h2>æµ‹è¯•2: SVG Data URLï¼ˆè‹±æ–‡ï¼‰</h2>
        <div class="avatar-container">
            <div class="avatar">
                <img id="avatar2" alt="R">
            </div>
            <span>Rootçš„å¤´åƒ</span>
        </div>
        <pre id="svg2"></pre>
    </div>

    <div class="avatar-test">
        <h2>æµ‹è¯•3: ç›´æ¥å†…åµŒSVG</h2>
        <div class="avatar-container">
            <div class="avatar">
                <svg width="48" height="48" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="24" cy="24" r="24" fill="#374151"/>
                    <text x="24" y="33" font-family="Arial, sans-serif" font-size="24" fill="white" text-anchor="middle" font-weight="bold">æŸ³</text>
                </svg>
            </div>
            <span>ç›´æ¥SVGï¼ˆå¯¹ç…§ç»„ï¼‰</span>
        </div>
    </div>

    <script>
        // ç”Ÿæˆé»˜è®¤å¤´åƒçš„å‡½æ•°
        function getDefaultAvatar(username) {
            if (!username || username.length === 0) {
                username = 'U'
            }
            
            const firstLetter = username.charAt(0).toUpperCase()
            
            // ç”ŸæˆSVG
            const svg = `<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg"><circle cx="16" cy="16" r="16" fill="#374151"/><text x="16" y="22" font-family="Arial, sans-serif" font-size="16" fill="white" text-anchor="middle" font-weight="bold">${firstLetter}</text></svg>`
            
            // ä½¿ç”¨encodeURIComponent
            return `data:image/svg+xml,${encodeURIComponent(svg)}`
        }

        // æµ‹è¯•1: ä¸­æ–‡
        const avatar1 = getDefaultAvatar('æŸ³è€å¸ˆ')
        document.getElementById('avatar1').src = avatar1
        document.getElementById('svg1').textContent = avatar1

        // æµ‹è¯•2: è‹±æ–‡
        const avatar2 = getDefaultAvatar('root')
        document.getElementById('avatar2').src = avatar2
        document.getElementById('svg2').textContent = avatar2

        // æ·»åŠ é”™è¯¯å¤„ç†
        document.getElementById('avatar1').onerror = function() {
            console.error('âŒ å¤´åƒ1åŠ è½½å¤±è´¥')
            this.style.border = '2px solid red'
        }
        document.getElementById('avatar1').onload = function() {
            console.log('âœ… å¤´åƒ1åŠ è½½æˆåŠŸ')
        }

        document.getElementById('avatar2').onerror = function() {
            console.error('âŒ å¤´åƒ2åŠ è½½å¤±è´¥')
            this.style.border = '2px solid red'
        }
        document.getElementById('avatar2').onload = function() {
            console.log('âœ… å¤´åƒ2åŠ è½½æˆåŠŸ')
        }

        console.log('æµ‹è¯•é¡µé¢å·²åŠ è½½ï¼Œæ£€æŸ¥ä¸Šæ–¹æ˜¾ç¤ºæ•ˆæœ')
    </script>
</body>
</html>

